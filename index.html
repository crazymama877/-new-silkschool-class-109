<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ä¸è·¯å­¦å­109å°å¤©ä½¿ç­</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --primary: #5da9ff; 
            --bg: #f0f4f8; 
            --success: #6cc48d; 
            --accent: #ffb347;
            --card-shadow: 0 8px 30px rgba(0,0,0,0.05);
            --radius: 16px;
            --nav-bg: linear-gradient(135deg, #e0f2ff 0%, #f0faff 100%); /* å¯¼èˆªèƒŒæ™¯è‰² */
        }

        body { 
            font-family: "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif; 
            background: var(--bg); 
            margin: 0; padding: 0; color: #4a4a4a;
            overflow-x: hidden; /* é˜²æ­¢æ¨ªå‘æ»šåŠ¨æ¡ */
        }
        
        /* --- å¯¼èˆªæ ä¼˜åŒ– --- */
        nav { 
            position: sticky; top: 0; z-index: 1000;
            background: var(--nav-bg); /* ä½¿ç”¨æ–°çš„æ¸å˜èƒŒæ™¯ */
            backdrop-filter: blur(10px);
            padding: 12px 30px; 
            display: flex; justify-content: space-between; align-items: center; 
            box-shadow: 0 2px 20px rgba(0,0,0,0.08);
            border-bottom: 1px solid rgba(255,255,255,0.5);
        }

        .title-area { display: flex; align-items: center; }
        .title-area i { font-size: 28px; color: var(--primary); margin-right: 10px; } /* æ–°å›¾æ ‡æ ·å¼ */
        .title-area h1 { 
            margin: 0; color: var(--primary); font-size: 24px; 
            font-weight: 800; letter-spacing: 1px;
        }

        #clock { font-family: "Courier New", monospace; color: #777; font-size: 14px; margin-left: 15px; margin-top: 4px; }

        .nav-links { display: flex; gap: 10px; flex-wrap: wrap; } /* å…è®¸æ¢è¡Œé€‚åº”å°å±å¹• */
        .nav-links a { 
            text-decoration: none; color: white; 
            background: linear-gradient(135deg, #6eb5ff, #5da9ff);
            padding: 8px 18px; border-radius: 30px; 
            font-size: 14px; font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 15px rgba(110, 181, 255, 0.3);
            position: relative; /* ç¡®ä¿å±‚çº§ */
            z-index: 1001; /* æ¯”å¯¼èˆªæ æ›´é«˜ */
        }
        .nav-links a:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(110, 181, 255, 0.5); }
        /* ä¸ºä¸åŒç±»å‹çš„é“¾æ¥è®¾ç½®ä¸åŒé¢œè‰² */
        .nav-links a.btn-garden { background: linear-gradient(135deg, #ff9a9e, #fad0c4); box-shadow: 0 4px 15px rgba(255, 154, 158, 0.3); }
        .nav-links a.btn-forest { background: linear-gradient(135deg, #a1c4fd, #c2e9fb); box-shadow: 0 4px 15px rgba(161, 196, 253, 0.3); }
        .nav-links a.btn-manage { background: linear-gradient(135deg, #84fab0, #8fd3f4); box-shadow: 0 4px 15px rgba(132, 250, 176, 0.3); }
        .nav-links a.btn-modal { background: linear-gradient(135deg, #fbc2eb, #a6c1ee); box-shadow: 0 4px 15px rgba(251, 194, 235, 0.3); color: #555; }


        /* --- å¸ƒå±€ä¸å¡ç‰‡ç¾åŒ– --- */
        .main-content { 
            max-width: 1300px; margin: 30px auto; padding: 0 20px; 
            display: grid; grid-template-columns: 1fr 1.2fr; gap: 25px; 
        }

        .card { 
            background: white; padding: 30px; border-radius: var(--radius); 
            box-shadow: var(--card-shadow); border: 1px solid rgba(255,255,255,0.8);
            transition: transform 0.3s ease;
            position: relative; /* ä¸ºä¼ªå…ƒç´ å®šä½ */
            overflow: hidden; /* éšè—æº¢å‡ºçš„è‰²æ¡ */
        }
        /* é¡¶éƒ¨é¢œè‰²æ¡ */
        .card::before {
            content: "";
            position: absolute; top: 0; left: 0; width: 100%; height: 6px;
            background: linear-gradient(90deg, var(--primary), var(--success));
        }

        .full-width { grid-column: span 2; }

        h2 { 
            color: var(--primary); font-size: 22px; font-weight: 700;
            margin-top: 0; margin-bottom: 25px; display: flex; align-items: center;
        }
        h2 i { margin-right: 12px; font-size: 24px; } /* æ ‡é¢˜å›¾æ ‡æ ·å¼ */

        /* --- å„æ¿å—å†…å®¹æ ·å¼ --- */
        /* è¯­å½• */
        .quote-item { font-size: 28px; font-weight: 600;color: #444; line-height: 1.8; margin-bottom: 8px; border-bottom: 1px dashed #eee; padding-bottom: 8px; }

        /* å€¼æ—¥ä¸è¯¾è¡¨ */
        .right-column-group { display: flex; flex-direction: column; gap: 25px; }
        .duty-item { padding: 15px; background: #f9fbff; border-radius: 12px; border: 1px solid #edf2f7; margin-bottom: 10px; }
        .duty-label { color: var(--primary); font-size: 16px; font-weight: bold; display: block; margin-bottom: 5px; }
        .duty-names { font-size: 30px; color: #333; font-weight: 600; }

        .time-tag { display: inline-block; padding: 4px 14px; background: var(--accent); color: white; border-radius: 8px; font-size: 18px; margin: 15px 0 12px 0; font-weight: 600; }
        .course-row { display: flex; flex-wrap: wrap; gap: 12px; }
        .course-bubble { padding: 10px 22px; background: white; border: 2px solid #eef2f7; border-radius: 50px; font-size: 28px; font-weight: 700; color: #444; box-shadow: 0 2px 8px rgba(0,0,0,0.02); }

        /* è®°äº‹æœ¬ */
        #weekly-notes { font-size: 30px; font-weight: 600;color: #555; background: #fffcf0; padding: 20px; border-radius: 12px; border: 1px solid #f9f2d5; white-space: pre-wrap; }

        /* --- èƒ½é‡ç«™ä¸æ¤ç‰©æˆé•¿ --- */
        .energy-station { background: linear-gradient(180deg, #ffffff 0%, #f7faff 100%); }
        /* æ¤ç‰©æˆé•¿å®¹å™¨ */
        .plant-growth-container {
            text-align: center; margin-bottom: 15px; height: 60px; display: flex; justify-content: center; align-items: flex-end;
        }
        .plant-icon { font-size: 50px; color: var(--success); transition: all 0.5s ease; }
        
        .progress-container { text-align: center; }
        .progress-bar-bg { background: #e2e8f0; height: 32px; border-radius: 50px; overflow: hidden; margin: 10px 0 25px; border: 4px solid #fff; box-shadow: inset 0 2px 4px rgba(0,0,0,0.05); }
        .progress-bar-fill { background: linear-gradient(90deg, #96e6a1, #6cc48d); box-shadow: 0 0 15px rgba(108, 196, 141, 0.4); height: 100%; width: 0%; transition: width 0.6s ease; }

        .student-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 15px; }
        .student-item { 
            padding: 18px 10px; border: 1px solid #e2e8f0; border-radius: 18px; 
            text-align: center; cursor: pointer; background: white; font-size: 17px; font-weight: 500;
            transition: all 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.02); user-select: none;
        }
        .student-item:hover { transform: translateY(-5px); border-color: var(--primary); color: var(--primary); }
        .student-item.done { 
            background: var(--success) !important; color: white !important; 
            border-color: transparent; transform: scale(0.95); box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); 
        }
        .student-item.done small { display: block; font-size: 12px; margin-top: 5px; opacity: 0.9; }

        /* --- æ’’èŠ±ç”»å¸ƒ (ä¿®å¤é“¾æ¥ç‚¹å‡»é—®é¢˜çš„å…³é”®) --- */
        #confetti-canvas { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            pointer-events: none; /* è®©ç‚¹å‡»äº‹ä»¶ç©¿é€ */
            z-index: -1; /* ç½®äºæœ€åº•å±‚èƒŒæ™¯ä¹‹ä¸Šï¼Œå†…å®¹ä¹‹ä¸‹ */
        }

        /* --- æ¨¡æ€æ¡†æ ·å¼ --- */
        .modal {
            display: none; /* é»˜è®¤éšè— */
            position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%;
            overflow: auto; background-color: rgba(0,0,0,0.5); /* åŠé€æ˜é»‘èƒŒæ™¯ */
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: #fefefe; margin: 10% auto; padding: 30px;
            border: 1px solid #888; width: 80%; max-width: 700px;
            border-radius: var(--radius); box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
        }
        .close-btn {
            color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer;
            position: absolute; right: 20px; top: 15px;
        }
        .close-btn:hover { color: #000; }
        .modal h2 { margin-top: 0; }
        /* æ¨¡æ‹Ÿä¸Šä¼ ç•Œé¢çš„æ ·å¼ */
        .upload-area {
            border: 2px dashed #ccc; padding: 40px; text-align: center;
            border-radius: 10px; margin: 20px 0; color: #666; cursor: pointer;
            transition: all 0.3s;
        }
        .upload-area:hover { border-color: var(--primary); color: var(--primary); background: #f0f8ff; }
        .upload-area i { font-size: 40px; margin-bottom: 10px; display: block; }
        .rich-editor-mock {
            border: 1px solid #ddd; border-radius: 10px; min-height: 200px;
            background: #fff; padding: 15px; margin-top: 15px;
        }
        .editor-toolbar {
            border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 10px;
            display: flex; gap: 10px;
        }
        .editor-btn {
            padding: 5px 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; background: #f9f9f9;
        }
    </style>
</head>
<body>

<audio id="confetti-sound" src="https://img.tukuppt.com/newpreview_music/09/00/67/5c8911710360666753.mp3" preload="auto"></audio>
<canvas id="confetti-canvas"></canvas>

<nav>
    <div class="title-area">
        <i class="fa-solid fa-graduation-cap"></i>
        <h1>ä¸è·¯å­¦å­ 109 å°å¤©ä½¿</h1>
        <div id="clock">åŠ è½½ä¸­...</div>
    </div>
    <div class="nav-links">
        <a href="garden.html" class="btn-garden"><i class="fa-solid fa-sun-plant"></i> æ—©è¯»èŠ±å›­</a>
        <a href="forest.html" class="btn-forest"><i class="fa-solid fa-tree"></i> å®‰é™æ£®æ—</a>
        <a href="https://a.welife001.com/web/login" target="_blank" class="btn-manage"><i class="fa-solid fa-users-gear"></i> ç­çº§ç®¡ç†</a>
        <a href="#" class="btn-modal trigger-modal" data-target="modal-planet"><i class="fa-solid fa-earth-asia"></i> å¸ƒå¯æ˜Ÿçƒ</a>
        <a href="#" class="btn-modal trigger-modal" data-target="modal-reading"><i class="fa-solid fa-book-open-reader"></i> ç»å…¸è¯µè¯»</a>
        <a href="#" class="btn-modal trigger-modal" data-target="modal-life"><i class="fa-solid fa-camera-retro"></i> ç”Ÿæ´»é›†é”¦</a>
    </div>
</nav>

<div class="main-content">
    <div class="card">
        <h2><i class="fa-solid fa-quote-left"></i> ç­çº§å¾®è¯­å½•</h2>
        <div id="quote-container">
            <div class="quote-item">1. åˆ°æ ¡å…ˆå‡†å¤‡ä½œä¸šæœ¬ï¼Œæ—©è¯»åä¸Šäº¤ã€‚</div>
            <div class="quote-item">2. ä¸‹è¯¾å‹¤å–æ°´ï¼Œå‹¤ä¸Šå•æ‰€ã€‚</div>
            <div class="quote-item">3. ä¸Šè¯¾å›ç­”å¤§å£°è¯´ï¼Œè¯¾é—´ä¼‘æ¯å°å£°è¯´ã€‚</div>
            <div class="quote-item">4. ç”¨å¿ƒå¬è¯¾ï¼Œé™å¿ƒç”¨é¤ï¼Œå‹¿é—²èŠã€‚</div>
            <div class="quote-item">5. èµ°è·¯è„šæ­¥è½»ï¼Œä¸è¿½è·‘ä¸æ‰“é—¹ä¸æ¨æŒ¤ã€‚</div>
            <div class="quote-item">6. ä¸»åŠ¨åˆ†æ‹…ç­çº§äº‹ï¼Œä¸è®¡è¾ƒä¸äº‰åµã€‚</div>
            <div class="quote-item">7. è¡£ç€æ•´æ´ï¼Œæ¡Œæ¤…å¯¹é½ï¼Œåœ°é¢æ— åƒåœ¾ã€‚</div>
            <div class="quote-item">8. å°†å¿ƒæ¯”å¿ƒï¼Œä¸ç»™ä»–äººæ·»éº»çƒ¦ã€‚</div>
            <div class="quote-item">9. æŠŠæ¡æ—¶é—´é˜…è¯»ï¼Œä¹äºåˆ†äº«æˆé•¿ã€‚</div>
            <div class="quote-item">10. ä¸ºè‡ªå·±è´Ÿè´£ï¼Œæœ‰ä½™åŠ›æ‰åŠ©äººã€‚</div>
        </div>
    </div>
    
    <div class="right-column-group">
        <div class="card">
            <h2><i class="fa-solid fa-broom"></i> ä»Šæ—¥å€¼æ—¥æ˜Ÿ</h2>
            <div id="duty-display"></div>
        </div>
        <div class="card">
            <h2 id="timetable-title"><i class="fa-solid fa-calendar-days"></i> æˆ‘çš„è¯¾ç¨‹è¡¨</h2>
            <div id="timetable-display"></div>
        </div>
    </div>

    <div class="card full-width">
        <h2><i class="fa-solid fa-clipboard-list"></i> é‡è¦è®°äº‹æœ¬</h2>
        <div id="weekly-notes"></div>
    </div>

    <div class="card full-width energy-station">
        <h2><i class="fa-solid fa-seedling"></i> ç­çº§èƒ½é‡åŠ æ²¹ç«™</h2>
        
        <div class="plant-growth-container">
            <i id="plant-icon" class="fa-solid fa-seedling plant-icon"></i>
        </div>
        
        <div class="progress-container">
            <span class="progress-label" style="font-size: 18px;">ç­çº§èƒ½é‡å·²æ”¶é›†ï¼š<span id="percent-text" style="font-size: 28px; color: var(--success); font-weight:bold;">0</span> %</span>
            <div class="progress-bar-bg"><div id="progress-fill" class="progress-bar-fill"></div></div>
        </div>
        <div class="student-grid" id="student-container"></div>
    </div>
</div>

<div id="modal-planet" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2><i class="fa-solid fa-earth-asia"></i> å¸ƒå¯æ˜Ÿçƒ - èµ„æ–™ä¸Šä¼ </h2>
        <p>åœ¨è¿™é‡Œä¸Šä¼ æ‚¨çš„ PPTã€PDF ç­‰å­¦ä¹ èµ„æ–™ã€‚</p>
        <div class="upload-area">
            <i class="fa-solid fa-cloud-arrow-up"></i>
            <p>ç‚¹å‡»é€‰æ‹©æ–‡ä»¶ï¼Œæˆ–å°†æ–‡ä»¶æ‹–æ‹½åˆ°æ­¤å¤„</p>
            <input type="file" id="file-upload-planet" style="display: none;" multiple accept=".ppt,.pptx,.pdf">
        </div>
        <button onclick="document.getElementById('file-upload-planet').click()" style="padding: 10px 20px; background: var(--primary); color: white; border: none; border-radius: 5px; cursor: pointer;">é€‰æ‹©æ–‡ä»¶</button>
    </div>
</div>

<div id="modal-reading" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2><i class="fa-solid fa-book-open-reader"></i> ç»å…¸è¯µè¯» - å†…å®¹ç¼–è¾‘</h2>
        <p>è®°å½•å’Œåˆ†äº«ç»å…¸è¯µè¯»å†…å®¹ï¼Œæ”¯æŒå›¾æ–‡å’Œè§†é¢‘ã€‚</p>
        <div class="rich-editor-mock">
            <div class="editor-toolbar">
                <button class="editor-btn"><i class="fa-solid fa-bold"></i> åŠ ç²—</button>
                <button class="editor-btn"><i class="fa-solid fa-image"></i> æ’å…¥å›¾ç‰‡</button>
                <button class="editor-btn"><i class="fa-solid fa-video"></i> æ’å…¥è§†é¢‘</button>
            </div>
            <div contenteditable="true" style="height: 150px; outline: none; color: #555;">åœ¨è¿™é‡Œè¾“å…¥è¯µè¯»å†…å®¹...</div>
        </div>
        <button style="margin-top: 15px; padding: 10px 20px; background: var(--success); color: white; border: none; border-radius: 5px; cursor: pointer;">å‘å¸ƒå†…å®¹</button>
    </div>
</div>

<div id="modal-life" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2><i class="fa-solid fa-camera-retro"></i> ç”Ÿæ´»é›†é”¦ - ç²¾å½©ç¬é—´</h2>
        <p>ä¸Šä¼ ç­çº§ç”Ÿæ´»ç…§ç‰‡å’Œè§†é¢‘ï¼Œè®°å½•ç¾å¥½æ—¶å…‰ã€‚</p>
        <div class="upload-area" style="border-color: var(--accent);">
            <i class="fa-solid fa-images" style="color: var(--accent);"></i>
            <p>æ‰¹é‡ä¸Šä¼ ç…§ç‰‡/è§†é¢‘</p>
             <input type="file" id="file-upload-life" style="display: none;" multiple accept="image/*,video/*">
        </div>
        <button onclick="document.getElementById('file-upload-life').click()" style="padding: 10px 20px; background: var(--accent); color: white; border: none; border-radius: 5px; cursor: pointer;">å¼€å§‹ä¸Šä¼ </button>
        <div class="rich-editor-mock" style="min-height: 100px;">
            <div contenteditable="true" style="height: 80px; outline: none; color: #555;">æ·»åŠ æ–‡å­—æè¿°...</div>
        </div>
    </div>
</div>


<script>
    // --- é…ç½®åŒºåŸŸ ---ä¿®æ”¹é‡è¦è®°äº‹æœ¬
    const CONFIG = {
        weeklyNotes:`
        2.2
        ä¸Šæ–°è¯¾ã€Šå°é’è›™ã€‹ï¼Œä¹¦å†™ã€Šæ˜¥å¤ç§‹å†¬ã€‹ç¬”é¡º
        2.3
        ä¸Šæ–°è¯¾ã€ŠçŒœå­—è°œã€‹ï¼Œä¹¦å†™ã€Šå§“æ°æ­Œã€‹ç¬”é¡º
        2.4
        ä¸Šåˆä¹¦å†™ã€Šå°é’è›™ã€‹ã€ŠçŒœå­—è°œã€‹ç¬”é¡ºï¼Œä¸‹åˆæ¸¸å­¦è€ƒï¼Œè€ƒå®Œæ­£å¼æ”¾å¯’å‡
        2.9
        ä¸Šåˆä¼‘ä¸šå¼`
};       
    document.getElementById('weekly-notes').innerText = CONFIG.weeklyNotes;

    // --- æ—¶é’Ÿ ---
    function updateTime() {
        const now = new Date();
        document.getElementById('clock').innerHTML = now.toLocaleDateString() + ' ' + now.toLocaleTimeString('zh-CN', { hour12: false });
    }
    setInterval(updateTime, 1000); updateTime();

    // --- æ•°æ®å®šä¹‰ ---
    const dutyTable = {
        1: { "æ‰«åœ°": "é™ˆç‘¾ä¹‹, é™ˆçƒæ¥š, å–»äº‘æ…ˆ, æ›¹è¯‘å¿ƒ", "æ‹–åœ°": "æ›¾å¯èˆª", "å€’åƒåœ¾": "é™ˆå˜‰ç…œ", "æ“¦é¤æ¡Œ": "å®‰æ³½é’§, åŒ…åšç„¶" },
        2: { "æ‰«åœ°": "é™ˆè¯­å«£, èƒ¡å¯ä¸€, é‡‘æ˜•æ©™, å­£èŠ·ç³", "æ‹–åœ°": "é™ˆæ€è¿œ", "å€’åƒåœ¾": "é»„ä½‘éºŸ", "æ“¦é¤æ¡Œ": "é‡‘ç¬ é˜³, é‡‘ç¬ è¿œ" },
        3: { "æ‰«åœ°": "åŠ³ä¸€è¯º, ææŒ¯æ´‹, å•ç»å¿ƒ, é‚µæ€€å®‰", "æ‹–åœ°": "åˆ˜é”´æ³½", "å€’åƒåœ¾": "å•ä¹å®‰", "æ“¦é¤æ¡Œ": "ä¸‡æ²ç†¹, ä¸‡æ²è¨€" },
        4: { "æ‰«åœ°": "ç‹æ™¨å¸Œ, ç‹æ§¿æ¬, ç‹æ˜æœ—, å´æ²æ¶µ", "æ‹–åœ°": "å¾é€¸å®¸", "å€’åƒåœ¾": "å®£æ¥šæ¬", "æ“¦é¤æ¡Œ": "è”¡ä¸ç…œ, è–›ä¸ç„±" },
        5: { "æ‰«åœ°": "å¼ æƒ æœˆ, å¼ å‡Œèµ«, å¼ æ–°æ‚¦, å¼ èŠ·èŒ", "æ‹–åœ°": "å‘¨æ˜±æ°", "å€’åƒåœ¾": "å¼ å‡Œäº‘", "æ“¦é¤æ¡Œ": "å¼ ç…œå®¸, èµµç…œå®" }
    };

    const timetableData = {
        1: { morning: ["è¯­æ–‡", "æ•°å­¦", "éŸ³ä¹"], afternoon: ["ç¾æœ¯", "è¯­æ–‡"] },
        2: { morning: ["æ•°å­¦", "è¯­æ–‡", "ä½“è‚²"], afternoon: ["ç§‘å­¦", "é“æ³•"] },
        3: { morning: ["è¯­æ–‡", "æ•°å­¦", "é“æ³•"], afternoon: ["ä¹¦æ³•", "ä½“è‚²"] },
        4: { morning: ["æ•°å­¦", "è¯­æ–‡", "ç¾æœ¯"], afternoon: ["åŠ³åŠ¨", "ä½“è‚²"] },
        5: { morning: ["è¯­æ–‡", "æ ¡æœ¬", "éŸ³ä¹"], afternoon: ["ä½“è‚²", "è¯­æ–‡", "ç»¼åˆ"] }
    };

    // --- åˆå§‹åŒ–æ¯æ—¥ä¿¡æ¯ ---
    function initDaily() {
        const weeks = ["å‘¨æ—¥", "å‘¨ä¸€", "å‘¨äºŒ", "å‘¨ä¸‰", "å‘¨å››", "å‘¨äº”", "å‘¨å…­"];
        let d = new Date().getDay();
        if(d === 0 || d === 6) d = 1;

        const info = dutyTable[d];
        let dHtml = '';
        for(let k in info) {
            dHtml += `<div class="duty-item"><span class="duty-label">${k}</span><span class="duty-names">${info[k]}</span></div>`;
        }
        document.getElementById('duty-display').innerHTML = dHtml;

        document.getElementById('timetable-title').innerHTML = `<i class="fa-solid fa-calendar-days"></i> æˆ‘çš„è¯¾ç¨‹è¡¨ (${weeks[d]})`;
        const tData = timetableData[d];
        let tHtml = `<div class="time-tag">AM ä¸Šåˆè¯¾ç¨‹</div><div class="course-row">`;
        tData.morning.forEach(c => tHtml += `<div class="course-bubble">${c}</div>`);
        tHtml += `</div><div class="time-tag" style="background:#76c893">PM ä¸‹åˆè¯¾ç¨‹</div><div class="course-row">`;
        tData.afternoon.forEach(c => tHtml += `<div class="course-bubble">${c}</div>`);
        tHtml += `</div>`;
        document.getElementById('timetable-display').innerHTML = tHtml;
    }
    initDaily();


    // --- å­¦ç”Ÿåå• ---
    const students = ["å®‰æ³½é’§","åŒ…åšç„¶","è”¡ä¸ç…œ","æ›¹è¯‘å¿ƒ","æ›¾å¯èˆª","é™ˆå˜‰ç…œ","é™ˆç‘¾ä¹‹","é™ˆçƒæ¥š","é™ˆæ€è¿œ","é™ˆè¯­å«£","èƒ¡å¯ä¸€","é»„ä½‘éºŸ","å­£èŠ·ç³","é‡‘ç¬ é˜³","é‡‘ç¬ è¿œ","é‡‘æ˜•æ©™","åŠ³ä¸€è¯º","ææŒ¯æ´‹","åˆ˜é”´æ³½","å•ä¹å®‰","å•ç»å¿ƒ","é‚µæ€€å®‰","ä¸‡æ²ç†¹","ä¸‡æ²è¨€","ç‹æ™¨å¸Œ","ç‹æ§¿æ¬","ç‹æ˜æœ—","å´æ²æ¶µ","å¾é€¸å®¸","å®£æ¥šæ¬","è–›ä¸ç„±","å–»äº‘æ…ˆ","å¼ æƒ æœˆ","å¼ å‡Œèµ«","å¼ æ–°æ‚¦","å¼ èŠ·èŒ","å‘¨æ˜±æ°","å¼ å‡Œäº‘","å¼ ç…œå®¸","èµµç…œå®"];
    
    // --- èƒ½é‡ç«™é€»è¾‘ ---
    let doneCount = 0;
    const container = document.getElementById('student-container');
    const plantIcon = document.getElementById('plant-icon');
    const sound = document.getElementById('confetti-sound'); // è·å–éŸ³æ•ˆå…ƒç´ 

    // 5. ç¾é£Ÿå›¾æ ‡æ•°ç»„ (20+ç§)
    const foodIcons = ['ğŸ”', 'ğŸ•', 'ğŸŸ', 'ğŸŒ­', 'ğŸ¿', 'ğŸ©', 'ğŸª', 'ğŸ‚', 'ğŸ°', 'ğŸ§', 'ğŸ«', 'ğŸ¬', 'ğŸ­', 'ğŸ', 'ğŸŠ', 'ğŸŒ', 'ğŸ“', 'ğŸ‡', 'ğŸ‰', 'ğŸ’', 'ğŸ‘', 'ğŸ', 'ğŸ¥¥', 'ğŸ¥', 'ğŸ¥', 'ğŸ§‡', 'ğŸ¥¨', 'ğŸ¥¯', 'ğŸ¥', 'ğŸ¥©', 'ğŸ—', 'ğŸ–', 'ğŸ¥¤', 'ğŸ§‹', 'ğŸº', 'ğŸ»', 'ğŸ¦', 'ğŸ§', 'ğŸ¨'];

    // 5. å‡çº§ç‰ˆæ’’èŠ±å‡½æ•°ï¼šéšæœºç¾é£Ÿ + éŸ³æ•ˆ
    function fireConfetti() {
        // æ’­æ”¾éŸ³æ•ˆ
        sound.currentTime = 0; // æ¯æ¬¡ä»å¤´æ’­æ”¾
        sound.play().catch(e => console.log("éŸ³æ•ˆæ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½æ˜¯æµè§ˆå™¨ç­–ç•¥é™åˆ¶", e));

        // éšæœºé€‰æ‹©ä¸€ç§é£Ÿç‰©
        const randomFood = foodIcons[Math.floor(Math.random() * foodIcons.length)];

        var end = Date.now() + (3 * 1000);
        (function frame() {
            // ä½¿ç”¨ emoji ä½œä¸ºæ’’èŠ±å½¢çŠ¶
            confetti({ 
                particleCount: 3, 
                angle: 60, 
                spread: 55, 
                origin: { x: 0 },
                shapes: ['emoji'],
                shapeOptions: {
                    emoji: {
                        value: [randomFood] // ä½¿ç”¨é€‰ä¸­çš„é£Ÿç‰©
                    }
                },
                scalar: 2 // æ”¾å¤§ emoji å°ºå¯¸
            });
            confetti({ 
                particleCount: 3, 
                angle: 120, 
                spread: 55, 
                origin: { x: 1 }, 
                shapes: ['emoji'],
                shapeOptions: {
                    emoji: {
                        value: [randomFood]
                    }
                },
                scalar: 2
            });
            if (Date.now() < end) requestAnimationFrame(frame);
        }());
    }

    students.forEach(name => {
        const div = document.createElement('div');
        div.className = 'student-item';
        div.innerText = name;
        div.onclick = function() {
            this.classList.toggle('done');
            if(this.classList.contains('done')) {
                doneCount++;
                this.innerHTML = `${name}<br><small>å·²åŠ æ²¹</small>`;
            } else {
                doneCount--;
                this.innerText = name;
            }
            
            const p = Math.round((doneCount / students.length) * 100);
            document.getElementById('progress-fill').style.width = p + "%";
            document.getElementById('percent-text').innerText = p;
            
            // 5. æ¤ç‰©æˆé•¿é€»è¾‘æ›´æ–°
            if (p === 0) {
                plantIcon.className = 'fa-solid fa-seedling plant-icon'; // ç§å­
                plantIcon.style.color = '#6cc48d';
            } else if (p > 0 && p <= 20) {
                plantIcon.className = 'fa-solid fa-hand-holding-seedling plant-icon'; // å‘èŠ½
                plantIcon.style.color = '#6cc48d';
            } else if (p > 20 && p <= 50) {
                plantIcon.className = 'fa-solid fa-tree plant-icon'; // å°æ ‘
                plantIcon.style.color = '#4ade80';
                plantIcon.style.transform = 'scale(0.8)';
            } else if (p > 50 && p < 100) {
                 plantIcon.className = 'fa-solid fa-tree plant-icon'; // å¤§æ ‘
                 plantIcon.style.color = '#22c55e';
                 plantIcon.style.transform = 'scale(1.2)';
            }

            if (p === 100) {
                plantIcon.className = 'fa-solid fa-tree-city plant-icon'; // ç¹èŒ‚æ£®æ—
                plantIcon.style.color = '#16a34a';
                plantIcon.style.transform = 'scale(1.5)';
                fireConfetti();
            } else {
                // æœªæ»¡100æ—¶é‡ç½® transformï¼Œé¿å…å½±å“å°æ ‘é˜¶æ®µ
                 if (p <= 50 && p > 0) plantIcon.style.transform = 'scale(1)';
            }
        };
        container.appendChild(div);
    });

    // --- 6. æ¨¡æ€æ¡†äº¤äº’é€»è¾‘ ---
    // è·å–æ‰€æœ‰è§¦å‘æŒ‰é’®å’Œæ¨¡æ€æ¡†
    const triggers = document.querySelectorAll('.trigger-modal');
    const modals = document.querySelectorAll('.modal');
    const closeBtns = document.querySelectorAll('.close-btn');

    // æ‰“å¼€æ¨¡æ€æ¡†
    triggers.forEach(trigger => {
        trigger.addEventListener('click', (e) => {
            e.preventDefault(); // é˜»æ­¢é»˜è®¤é”šç‚¹è·³è½¬
            const targetId = trigger.getAttribute('data-target');
            document.getElementById(targetId).style.display = 'block';
        });
    });

    // å…³é—­æŒ‰é’®å…³é—­
    closeBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            btn.closest('.modal').style.display = 'none';
        });
    });

    // ç‚¹å‡»é®ç½©å±‚å…³é—­
    window.addEventListener('click', (e) => {
        if (e.target.classList.contains('modal')) {
            e.target.style.display = 'none';
        }
    });

</script>
</body>
</html>
